{% extends "core/base.html" %}
{% load static %}

{# ğŸ“ Plantilla principal: critica.html                                 #}
{# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      #}
{# PÃ¡gina donde se puede crear una crÃ­tica nueva y ver el listado de todas las existentes.                                                          #}
{# Tiene dos columnas: formulario de ingreso y listado de crÃ­ticas.      #}
{# El estilo estÃ¡ incrustado para facilitar desarrollo rÃ¡pido y personalizaciÃ³n local.                                                   #}

{% block content %}

<style>
    /* ğŸ¨ Estilos visuales personalizados */
    body {
        background-color: #003366;
        color: white;
        font-family: Arial, sans-serif;
    }

    .container {
        margin: 0 auto;
        padding: 20px;
        background-color: rgba(0, 0, 0, 0.7);
        border-radius: 10px;
        overflow: hidden; 
    }

    .container2 {
        clear: both;
    }

    .form-container {
        width: 48%;
        float: left;
        margin-right: 2%;
    }

    .list-container {
        padding-left: 65px;
        width: 48%;
        float: left;
    }

    .form-group {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 5px;
    }

    input, textarea, select {
        width: 100%;
        padding: 10px;
        box-sizing: border-box;
    }

    button {
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border: none;
        cursor: pointer;
    }

    button:hover {
        background-color: #0056b3;
    }

    ul {
        list-style-type: none;
        padding: 0;
    }

    li {
        margin-bottom: 10px;
    }

    .actions {
        margin-top: 10px;
    }
</style>

{% if user.is_authenticated %}
  

<div class="container">
    {# ğŸ“‹ Formulario para agregar una nueva crÃ­tica #}
    <div class="form-container">
        <h2>Agregar CrÃ­tica</h2>
        <form method="post">
            {% csrf_token %}
            <div class="form-group">
                {# ğŸ“š SelecciÃ³n de libro #}
                <label for="{{ form.id_libros.id_for_label }}">TÃ­tulo:</label>
                {{ form.id_libros }}
            </div>
            <div class="form-group">
                {# âœï¸ Campo de texto para escribir la crÃ­tica #}
                <label for="{{ form.contenido.id_for_label }}">Contenido:</label>
                {{ form.contenido }}
            </div>
            <button type="submit">Grabar</button>
        </form>
    </div>

    {# ğŸ—‚ï¸ Listado de todas las crÃ­ticas guardadas #}
    <div class="list-container">
        <h2>Listado de CrÃ­ticas</h2>
        <ul>
            {% for critica in criticas %}
                <li>
                    <strong>{{ critica.id_libros }}</strong>: "{{ critica.contenido }}"
                    <div class="actions">
                        {# ğŸ› ï¸ Enlace para editar esta crÃ­tica #}
                        <a href="{% url 'critica:editar_critica' critica.pk %}">Editar</a>
                        {# ğŸ—‘ï¸ Enlace para borrar esta crÃ­tica #}
                        <a href="{% url 'critica:borrar_critica' critica.pk %}">Borrar</a>
                    </div>
                </li>
            {% empty %}
                {# ğŸ“„ Mensaje cuando no hay crÃ­ticas aÃºn #}
                <li>No hay crÃ­ticas disponibles.</li>
            {% endfor %}
        </ul>
    </div>
</div>

{% else %}
  <p>Inicia sesiÃ³n para agregar una crÃ­tica.</p>
{% endif %}

<div class="container2"></div>

{% endblock %}